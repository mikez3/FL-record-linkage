2024-02-08 14:57:10,437 - SimulatorRunner - INFO - Create the Simulator Server.
2024-02-08 14:57:10,438 - Cell - INFO - server: creating listener on tcp://0:34979
2024-02-08 14:57:10,449 - Cell - INFO - server: created backbone external listener for tcp://0:34979
2024-02-08 14:57:10,449 - ConnectorManager - INFO - 57149: Try start_listener Listener resources: {'secure': False, 'host': 'localhost'}
2024-02-08 14:57:10,449 - nvflare.fuel.f3.sfm.conn_manager - INFO - Connector [CH00002 PASSIVE tcp://0:29831] is starting
2024-02-08 14:57:10,950 - Cell - INFO - server: created backbone internal listener for tcp://localhost:29831
2024-02-08 14:57:10,951 - nvflare.fuel.f3.sfm.conn_manager - INFO - Connector [CH00001 PASSIVE tcp://0:34979] is starting
2024-02-08 14:57:11,042 - nvflare.fuel.hci.server.hci - INFO - Starting Admin Server localhost on Port 56367
2024-02-08 14:57:11,042 - SimulatorRunner - INFO - Deploy the Apps.
2024-02-08 14:57:11,045 - SimulatorRunner - INFO - Create the simulate clients.
2024-02-08 14:57:11,046 - ClientManager - INFO - Client: New client site-1@192.168.1.13 joined. Sent token: 319e3562-cbdc-474c-909d-4b8881ab42a1.  Total clients: 1
2024-02-08 14:57:11,047 - FederatedClient - INFO - Successfully registered client:site-1 for project simulator_server. Token:319e3562-cbdc-474c-909d-4b8881ab42a1 SSID:
2024-02-08 14:57:11,048 - ClientManager - INFO - Client: New client site-2@192.168.1.13 joined. Sent token: ea77c70d-fee3-44b0-8c48-0657cfae5683.  Total clients: 2
2024-02-08 14:57:11,048 - FederatedClient - INFO - Successfully registered client:site-2 for project simulator_server. Token:ea77c70d-fee3-44b0-8c48-0657cfae5683 SSID:
2024-02-08 14:57:11,048 - SimulatorRunner - INFO - Set the client status ready.
2024-02-08 14:57:11,048 - SimulatorRunner - INFO - Deploy and start the Server App.
2024-02-08 14:57:11,049 - ServerCommandAgent - INFO - ServerCommandAgent cell register_request_cb: server.simulate_job
2024-02-08 14:57:11,996 - numexpr.utils - INFO - Note: NumExpr detected 12 cores but "NUMEXPR_MAX_THREADS" not set, so enforcing safe limit of 8.
2024-02-08 14:57:11,996 - numexpr.utils - INFO - NumExpr defaulting to 8 threads.
2024-02-08 14:57:12,520 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job]: Server runner starting ...
2024-02-08 14:57:12,521 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job]: starting workflow scatter_and_gather (<class 'nvflare.app_common.workflows.scatter_and_gather.ScatterAndGather'>) ...
2024-02-08 14:57:12,521 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Initializing ScatterAndGather workflow.
2024-02-08 14:57:12,521 - JoblibModelParamPersistor - INFO - Initialization, sending global settings: {'kernel': 'rbf'}
2024-02-08 14:57:12,521 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Workflow scatter_and_gather (<class 'nvflare.app_common.workflows.scatter_and_gather.ScatterAndGather'>) started
2024-02-08 14:57:12,521 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Beginning ScatterAndGather training phase.
2024-02-08 14:57:12,521 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Round 0 started.
2024-02-08 14:57:12,522 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: scheduled task train
2024-02-08 14:57:13,052 - SimulatorClientRunner - INFO - Start the clients run simulation.
2024-02-08 14:57:14,054 - SimulatorClientRunner - INFO - Simulate Run client: site-1
2024-02-08 14:57:14,054 - SimulatorClientRunner - INFO - Simulate Run client: site-2
2024-02-08 14:57:17,171 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, task_name=train, task_id=b8e697d1-1510-496b-8222-9a91b29e8fad]: assigned task to client site-1: name=train, id=b8e697d1-1510-496b-8222-9a91b29e8fad
2024-02-08 14:57:17,171 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, task_name=train, task_id=b8e697d1-1510-496b-8222-9a91b29e8fad]: sent task assignment to client. client_name:site-1 task_id:b8e697d1-1510-496b-8222-9a91b29e8fad
2024-02-08 14:57:17,171 - GetTaskCommand - INFO - return task to client.  client_name: site-1  task_name: train   task_id: b8e697d1-1510-496b-8222-9a91b29e8fad  sharable_header_task_id: b8e697d1-1510-496b-8222-9a91b29e8fad
2024-02-08 14:57:17,174 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, task_name=train, task_id=62644d89-af0a-4cc8-811e-121e37de3ff9]: assigned task to client site-2: name=train, id=62644d89-af0a-4cc8-811e-121e37de3ff9
2024-02-08 14:57:17,174 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, task_name=train, task_id=62644d89-af0a-4cc8-811e-121e37de3ff9]: sent task assignment to client. client_name:site-2 task_id:62644d89-af0a-4cc8-811e-121e37de3ff9
2024-02-08 14:57:17,174 - GetTaskCommand - INFO - return task to client.  client_name: site-2  task_name: train   task_id: 62644d89-af0a-4cc8-811e-121e37de3ff9  sharable_header_task_id: 62644d89-af0a-4cc8-811e-121e37de3ff9
2024-02-08 14:57:17,903 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: received task_check on task 62644d89-af0a-4cc8-811e-121e37de3ff9
2024-02-08 14:57:17,903 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: task 62644d89-af0a-4cc8-811e-121e37de3ff9 is still good
2024-02-08 14:57:17,905 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: got result from client site-2 for task: name=train, id=62644d89-af0a-4cc8-811e-121e37de3ff9
2024-02-08 14:57:17,906 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, peer_rc=OK, task_name=train, task_id=62644d89-af0a-4cc8-811e-121e37de3ff9]: Contribution from site-2 ACCEPTED by the aggregator at round 0.
2024-02-08 14:57:17,906 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, peer_rc=OK, task_name=train, task_id=62644d89-af0a-4cc8-811e-121e37de3ff9]: finished processing client result by scatter_and_gather
2024-02-08 14:57:17,906 - SubmitUpdateCommand - INFO - submit_update process. client_name:site-2   task_id:62644d89-af0a-4cc8-811e-121e37de3ff9
2024-02-08 14:57:18,005 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: received task_check on task b8e697d1-1510-496b-8222-9a91b29e8fad
2024-02-08 14:57:18,005 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: task b8e697d1-1510-496b-8222-9a91b29e8fad is still good
2024-02-08 14:57:18,007 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: got result from client site-1 for task: name=train, id=b8e697d1-1510-496b-8222-9a91b29e8fad
2024-02-08 14:57:18,008 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, peer_rc=OK, task_name=train, task_id=b8e697d1-1510-496b-8222-9a91b29e8fad]: Contribution from site-1 ACCEPTED by the aggregator at round 0.
2024-02-08 14:57:18,008 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, peer_rc=OK, task_name=train, task_id=b8e697d1-1510-496b-8222-9a91b29e8fad]: finished processing client result by scatter_and_gather
2024-02-08 14:57:18,008 - SubmitUpdateCommand - INFO - submit_update process. client_name:site-1   task_id:b8e697d1-1510-496b-8222-9a91b29e8fad
2024-02-08 14:57:18,028 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: task train exit with status TaskCompletionStatus.OK
2024-02-08 14:57:18,529 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Start aggregation.
2024-02-08 14:57:18,529 - CollectAndAssembleAggregator - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: aggregating 2 update(s) at round 0
2024-02-08 14:57:18,533 - CollectAndAssembleAggregator - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Type of model: <class 'dict'>
2024-02-08 14:57:18,533 - CollectAndAssembleAggregator - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Size of model: 2
2024-02-08 14:57:18,533 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: End aggregation.
2024-02-08 14:57:18,534 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Start persist model on server.
2024-02-08 14:57:18,534 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: End persist model on server.
2024-02-08 14:57:18,534 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Round 0 finished.
2024-02-08 14:57:18,534 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Round 1 started.
2024-02-08 14:57:18,534 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: scheduled task train
2024-02-08 14:57:18,563 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, task_name=train, task_id=c1c17b69-fb52-4478-8353-8b6a453fcd43]: assigned task to client site-1: name=train, id=c1c17b69-fb52-4478-8353-8b6a453fcd43
2024-02-08 14:57:18,564 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, task_name=train, task_id=c1c17b69-fb52-4478-8353-8b6a453fcd43]: sent task assignment to client. client_name:site-1 task_id:c1c17b69-fb52-4478-8353-8b6a453fcd43
2024-02-08 14:57:18,564 - GetTaskCommand - INFO - return task to client.  client_name: site-1  task_name: train   task_id: c1c17b69-fb52-4478-8353-8b6a453fcd43  sharable_header_task_id: c1c17b69-fb52-4478-8353-8b6a453fcd43
2024-02-08 14:57:18,922 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: received task_check on task c1c17b69-fb52-4478-8353-8b6a453fcd43
2024-02-08 14:57:18,922 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: task c1c17b69-fb52-4478-8353-8b6a453fcd43 is still good
2024-02-08 14:57:18,925 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: got result from client site-1 for task: name=train, id=c1c17b69-fb52-4478-8353-8b6a453fcd43
2024-02-08 14:57:18,925 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, peer_rc=OK, task_name=train, task_id=c1c17b69-fb52-4478-8353-8b6a453fcd43]: Contribution from site-1 ACCEPTED by the aggregator at round 1.
2024-02-08 14:57:18,925 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, peer_rc=OK, task_name=train, task_id=c1c17b69-fb52-4478-8353-8b6a453fcd43]: finished processing client result by scatter_and_gather
2024-02-08 14:57:18,925 - SubmitUpdateCommand - INFO - submit_update process. client_name:site-1   task_id:c1c17b69-fb52-4478-8353-8b6a453fcd43
2024-02-08 14:57:18,971 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, task_name=train, task_id=1a3c57e3-b2f4-448d-ac6c-6b4e4440d668]: assigned task to client site-2: name=train, id=1a3c57e3-b2f4-448d-ac6c-6b4e4440d668
2024-02-08 14:57:18,971 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, task_name=train, task_id=1a3c57e3-b2f4-448d-ac6c-6b4e4440d668]: sent task assignment to client. client_name:site-2 task_id:1a3c57e3-b2f4-448d-ac6c-6b4e4440d668
2024-02-08 14:57:18,971 - GetTaskCommand - INFO - return task to client.  client_name: site-2  task_name: train   task_id: 1a3c57e3-b2f4-448d-ac6c-6b4e4440d668  sharable_header_task_id: 1a3c57e3-b2f4-448d-ac6c-6b4e4440d668
2024-02-08 14:57:19,314 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: received task_check on task 1a3c57e3-b2f4-448d-ac6c-6b4e4440d668
2024-02-08 14:57:19,314 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: task 1a3c57e3-b2f4-448d-ac6c-6b4e4440d668 is still good
2024-02-08 14:57:19,316 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: got result from client site-2 for task: name=train, id=1a3c57e3-b2f4-448d-ac6c-6b4e4440d668
2024-02-08 14:57:19,317 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, peer_rc=OK, task_name=train, task_id=1a3c57e3-b2f4-448d-ac6c-6b4e4440d668]: Contribution from site-2 ACCEPTED by the aggregator at round 1.
2024-02-08 14:57:19,317 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, peer_rc=OK, task_name=train, task_id=1a3c57e3-b2f4-448d-ac6c-6b4e4440d668]: finished processing client result by scatter_and_gather
2024-02-08 14:57:19,317 - SubmitUpdateCommand - INFO - submit_update process. client_name:site-2   task_id:1a3c57e3-b2f4-448d-ac6c-6b4e4440d668
2024-02-08 14:57:19,531 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: task train exit with status TaskCompletionStatus.OK
2024-02-08 14:57:19,536 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Start aggregation.
2024-02-08 14:57:19,536 - CollectAndAssembleAggregator - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: aggregating 2 update(s) at round 1
2024-02-08 14:57:19,537 - CollectAndAssembleAggregator - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Type of model: <class 'dict'>
2024-02-08 14:57:19,537 - CollectAndAssembleAggregator - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Size of model: 2
2024-02-08 14:57:19,538 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: End aggregation.
2024-02-08 14:57:19,539 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Start persist model on server.
2024-02-08 14:57:19,539 - JoblibModelParamPersistor - INFO - Saving received model to /home/mike/ΠΤΥΧΙΑΚΗ/NVFlare_project/my_nvflare_example/FL-record-linkage/workspace/simulate_job/app_server/model_param.joblib
2024-02-08 14:57:19,542 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: End persist model on server.
2024-02-08 14:57:19,543 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Round 1 finished.
2024-02-08 14:57:19,543 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Finished ScatterAndGather Training.
2024-02-08 14:57:19,543 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Workflow: scatter_and_gather finalizing ...
2024-02-08 14:57:19,876 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: no current workflow - asked client to try again later
2024-02-08 14:57:19,990 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: no current workflow - asked client to try again later
2024-02-08 14:57:20,032 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: ABOUT_TO_END_RUN fired
2024-02-08 14:57:20,032 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: END_RUN fired
2024-02-08 14:57:20,033 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Server runner finished.
2024-02-08 14:57:20,044 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: server runner is finalizing - asked client to end the run
2024-02-08 14:57:20,044 - GetTaskCommand - INFO - return task to client.  client_name: site-1  task_name: __end_run__   task_id:   sharable_header_task_id: 
2024-02-08 14:57:20,386 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: server runner is finalizing - asked client to end the run
2024-02-08 14:57:20,386 - GetTaskCommand - INFO - return task to client.  client_name: site-2  task_name: __end_run__   task_id:   sharable_header_task_id: 
2024-02-08 14:57:20,392 - FederatedClient - INFO - Shutting down client run: site-1
2024-02-08 14:57:20,393 - FederatedClient - INFO - Shutting down client run: site-2
2024-02-08 14:57:20,395 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: asked to abort - triggered abort_signal to stop the RUN
2024-02-08 14:57:21,529 - SimulatorServer - INFO - Server app stopped.


2024-02-08 14:57:21,556 - nvflare.fuel.hci.server.hci - INFO - Admin Server localhost on Port 56367 shutdown!
2024-02-08 14:57:21,556 - SimulatorServer - INFO - shutting down server
2024-02-08 14:57:21,556 - SimulatorServer - INFO - canceling sync locks
2024-02-08 14:57:21,557 - SimulatorServer - INFO - server off
2024-02-08 14:57:24,967 - MPM - INFO - MPM: Good Bye!
